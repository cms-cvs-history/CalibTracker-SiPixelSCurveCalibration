process SCurveCalibration =  {
  
source = PoolSource 
{ 
     # replace 'myfile.root' with the source file you want to use
     # root file must contain SiPixelCalibDigis - DataFormats/SiPixelDigi/interface/SiPixelCalibDigi.h
     # See CalibTracker/SiPixelGainCalibration/test for producers
     untracked vstring fileNames = {"file:myfile.root"} 
}

############################################################
# cabling maps and geometry
############################################################
       
    # Pixel Cabling Map from DataBase
    include "CalibTracker/Configuration/data/SiPixel_TIFCabling.cff"
    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

############################################################
# include the settings for SiPixelSCurveCalibrationAnalysis.cfi
############################################################

include "CalibTracker/SiPixelSCurveCalibration/data/SiPixelSCurveCalibrationAnalysis.cfi"

############################################################
# location of histogram output
############################################################
replace siPixelSCurveAnalysis.outputFileName = "scurve_histograms.root"

replace CondDBCommon.connect = "sqlite_file:/afs/cern.ch/user/f/friis/scratch0/siPixelCalibConfiguration.db"
service = MessageLogger {
    untracked vstring destinations = { "output" }
                                     
    untracked vstring categories = { "SiPixelSCurveCalibration", "SiPixelOfflineCalibAnalysisBase" , "SiPixelSCurveCalibrationHistogramReport"}
    untracked PSet output = {
                untracked string threshold = "WARNING"
                untracked PSet FwkReport  = { untracked int32 reportEvery = 200 }
                untracked PSet SiPixelSCurveCalibration = { untracked int32 limit = 100 }
                untracked PSet SiPixelSCurveCalibrationHistogramReport = { untracked int32 limit = 1000 }
                untracked PSet SiPixelOfflineCalibAnalysisBase = { untracked int32 limit = 1000 }
    }
}

############################################################
# Database tag of calib.dat object
############################################################
es_source = PoolDBESSource {
     using CondDBCommon
     VPSet toGet = { { 
		     string record = "SiPixelCalibConfigurationRcd"
                     # your tag here
		     string tag = "HC-Z1_HD1_B01_02_03_SCurve_23Aug07_1851 "
		     } }
}

path p = {filterEmptyCalibDigis, siPixelSCurveAnalysis} 

}
