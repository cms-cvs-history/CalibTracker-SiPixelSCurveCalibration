process PIXELSCURVECALIB =
{
   #PLEASE NOTE!!: Curently all histograms are written to file.
   #This will change in the near future.
   #Occasionally, the ROOT cammand gStyle->SetOptFit() is needed
   #to view the results of the function fit.

  # cabling
  include "CondCore/DBCommon/data/CondDBCommon.cfi"
  replace CondDBCommon.connect = "sqlite_file:cabling.db"
  replace CondDBCommon.catalog = "file:cablingCatalog.xml"
  replace CondDBCommon.timetype = "runnumber"
  replace CondDBCommon.DBParameters.messageLevel = 1
  replace CondDBCommon.DBParameters.authenticationPath="."
  es_source = PoolDBESSource {
    using CondDBCommon
    VPSet toGet={{string record="SiPixelFedCablingMapRcd" string tag="SiPixelFedCablingMap_v1"}}
  }


  # Tracker SimGeometryXML
    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"

  # Tracker Geometry Builder
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
  # Tracker Numbering Builder
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  untracked PSet maxEvents = {untracked int32 input = -1}
  source = PoolSource
  {
    untracked vstring fileNames = {"file:/uscms_data/d1/jkeller7/SCurve_070622_2x2_digi.root"} 
    #untracked vstring fileNames = {"file:SCurve_pilot_BmO_D1-2_BLD8-9_FED39_digi.root"}
  }

  service = TFileService {string fileName = "dummy.root"}

  service = MessageLogger
  {
    #untracked vstring destinations = {"/afs/cern.ch/user/k/kellerjd/scratch0/CMSSW_2007-06-28/src/UserCode/kellerjd/test/scurve_debug.log"} 
    untracked vstring destinations = {"cout"}
    untracked PSet cout = {untracked string threshold = "DEBUG"}
  }

  include "CalibTracker/SiPixelSCurveCalibration/data/SiPixelSCurveCalibrationAnalysis.cfi"
  replace scurve.inputCalibFile = "/uscms_data/d1/jkeller7/calib.dat_SCurve_hd-z1_bld4_5_6_dac1_070623_2x2"
  replace scurve.fedid = 33
  replace scurve.OutputTxtFile = "dummy.txt"
  #replace scurve.PrintPixelHistos = true

  path p = {scurve}
}

